+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.startY=null,this.isMoving=null,this.currentDelta=null,this.init()};b.DEFAULTS={onMove:null,onStart:null,onEnd:null,onRefresh:null,refreshOn:30,velocity:"300ms"},b.prototype.transform=function(a,b){a.webkitTransform="translate(0, "+b+"px)"+"translateZ(0)",a.msTransform=a.MozTransform=a.OTransform="translateY("+b+"px)"},b.prototype.transition=function(a,b){a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=b},b.prototype.onTouchStart=function(a,b){var c=this;c.transition(b.style,"0ms"),c.startY||(c.startY=a.originalEvent.touches[0].pageY),c.isMoving=!0,c.options.onStart&&c.options.onStart.apply(b,[c.startY])},b.prototype.onTouchMove=function(a,b){var c=this;if(!c.isMoving)return!1;var d=a.originalEvent.touches[0].pageY;c.startY||(c.startY=d);var e=d-c.startY,f=100*(e/c.options.refreshOn);return c.options.onMove&&c.options.onMove.apply(b,[f]),e>=c.options.refreshOn?(c.options.onRefresh&&c.options.onRefresh.apply(b,[e]),c.reset(b),!1):0>=e?(c.currentDelta>0&&(c.currentDelta=0,c.transform(b.style,0)),!1):(c.currentDelta=e,c.transform(b.style,e),void 0)},b.prototype.reset=function(a){this.transition(a.style,this.options.velocity),this.transform(a.style,0),this.isMoving=!1,this.startY=null},b.prototype.onTouchEnd=function(a,b){var c=this;c.options.onEnd&&c.options.onEnd.apply(b,[c.currentDelta]),c.reset(b)},b.prototype.proxy=function(a){var b=this,c=function(c){var d=this;a.apply(b,[c,d])};return c},b.prototype.init=function(){var a=this;a.$element.on("touchstart",a.proxy(a.onTouchStart)).on("touchmove",a.proxy(a.onTouchMove)).on("touchend",a.proxy(a.onTouchEnd))},b.dataKey="k.P2R";var c=a.fn.pullToRefresh;a.fn.pullToRefresh=function(c){return this.each(function(){var d=a(this),e=d.data(b.dataKey),f="object"==typeof c&&c;e||d.data(b.dataKey,e=new b(this,f))})},a.fn.pullToRefresh.Constructor=b,a.fn.pullToRefresh.noConflict=function(){return a.fn.pullToRefresh=c,this}}(jQuery);